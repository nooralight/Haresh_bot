<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dashboard</title>
    <!-- Favicon icon -->
    <link rel="icon" sizes="16x16" href="{{ url_for('static', filename= 'logo/logotipo.png') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">

    <link href="{{ url_for('static', filename = 'css/style.css') }}" rel="stylesheet">
    <style>
        .scrollable{
        overflow-y: auto;
        max-height: 550px;
        }
        /* Set a specific height for the table container */
        .custom-table-container {
            max-height: 650px; /* Change this value to your desired height */
            overflow-y: auto;
        }

        /* Style for the table */
        .custom-table {
            width: 100%;
            background-color: #fff;
        }
    </style>
</head>

<body>

    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
        <div class="sk-three-bounce">
            <div class="sk-child sk-bounce1"></div>
            <div class="sk-child sk-bounce2"></div>
            <div class="sk-child sk-bounce3"></div>
        </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->


    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">

        <!--**********************************
            Nav header start
        ***********************************-->
        <div class="nav-header">
            <a href="{{ url_for('home') }}" class="brand-logo" style="background-color: white;">
                
                <img class="logo-compact" src="" style="color: black;font-size: small;" alt="Pedal Club">
                <img class="brand-title" src="" style="color: black;font-size: small;" alt="Pedal Club">
                
            </a>

            <div class="nav-control">
                <div class="hamburger">
                    <span class="line"></span><span class="line"></span><span class="line"></span>
                </div>
            </div>
        </div>
        <!--**********************************
            Nav header end
        ***********************************-->

        <!--**********************************
            Header start
        ***********************************-->
        <div class="header">
            <div class="header-content">
                <nav class="navbar navbar-expand">
                    <div class="collapse navbar-collapse justify-content-between">
                        <div class="header-left">
                            
                        </div>

                        <ul class="navbar-nav header-right">
                            
                            <li class="nav-item dropdown header-profile">
                                <a class="nav-link" href="#" role="button" data-toggle="dropdown">
                                    <i class="mdi mdi-account"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <a href="#" class="dropdown-item">
                                        <i class="icon-user"></i>
                                        <span class="ml-2">Profile </span>
                                    </a>
                                    
                                    <a href="#" class="dropdown-item">
                                        <i class="icon-key"></i>
                                        <span class="ml-2">Logout </span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

        <!--**********************************
            Sidebar start
        ***********************************-->
        <div class="quixnav">
            <div class="quixnav-scroll">
                <ul class="metismenu" id="menu">
                    <li class="nav-label">Main Menu</li>
                    <li><a href="{{ url_for('home') }}" aria-expanded="false"><i class="fas fa-home"></i><span
                        class="nav-text">Dashboard</span></a>
                    </li>

                    <li class="nav-label">Message History</li>
                    <li><a href="{{ url_for('contacts') }}" aria-expanded="false"><i class="fas fa-address-book"></i><span
                        class="nav-text">Contacts</span></a>
                    </li>
                    <li class="nav-label">Matches</li>
                    <li><a href="{{ url_for('bookings') }}" aria-expanded="false"><i class="fas fa-puzzle-piece"></i><span
                        class="nav-text">Match Bookings</span></a>
                    </li>
                    <li class="nav-label">User Database</li>
                    <li><a class="has-arrow" href="javascript:void()" aria-expanded="false"><i class="fas fa-user-friends"></i>
                        <span class="nav-text">Players</span></a>
                        <ul aria-expanded="false">
                            <li><a href="{{ url_for('players') }}">List of Players</a></li>
                            <li><a href="{{ url_for('create_new_player') }}">Add new Player</a></li></ul>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!--**********************************
            Sidebar end
        ***********************************-->

        <!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body">
            <!-- row -->
            <div class="container-fluid">
                <div class="row page-titles mx-0">
                    <div class="col-sm-6 p-md-0">
                        <div class="welcome-text">
                            <h4>Players Database</h4>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-end mb-2">
                        <!-- Search Form -->
                        <form class="form-inline mx-2" id="search-form" action="#" method="post">
                            <div class="input-group mr-2">
                                <div class="input-group-append">
                                    <button class="btn btn-secondary" type="button">
                                        Level
                                    </button>
                                </div>
                                
                                <select id="inputLevel" class="form-control">
                                    <option selected>Choose...</option>
                                    <option>segunda baja</option>
                                    <option>tercera alta</option>
                                    <option>Tercera media</option>
                                    <option>Segunda medi</option>
                                    <option>cuarta baja</option>
                                    <option>segunda alta</option>
                                    <option>cuarta alta</option>
                                    <option>usuario no respo</option>
                                    <option>Cuarta media</option>
                                    <option>tercera baja</option>
                                    <option>No interesado</option>
                                    <option>undefined</option>
                                    <option>Extranjero</option>
                                    <option>Quinta</option>
                                    <option>primera</option>
                                    <option>nuevo usuario</option>
                                </select>
                                
                            </div>
                            <div class="input-group mr-2">
                                <div class="input-group-append">
                                    <button class="btn btn-secondary" type="button">
                                        Sex
                                    </button>
                                </div>
                                <select id="inputSex" class="form-control">
                                    <option selected>Choose...</option>
                                    <option>-</option>
                                    <option>Hombre</option>
                                    <option>Mujer</option>
                                </select>
                                
                            </div>
                            <div class="input-group">
                                <input type="text" id="all_search" name="all_search" class="form-control" placeholder="Search">
                                <div class="input-group-append">
                                    <button class="btn btn-secondary" type="submit">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="custom-table-container">
                        <table class="table table-bordered table-sm custom-table p-3" id="customTable" style="color: black;">
                            <thead class="table-dark">
                                <tr>
                                    <th class="text-center">ID</th>
                                    <th>Name</th>
                                    <th class="text-center">Phone</th>
                                    <th class="text-center">Age</th>
                                    <th class="text-center">Sex</th>
                                    <th class="text-center">Level</th>
                                    <th class="text-center">Availability</th>
                                    <th class="text-center">Preferred Position</th>
                                    <th class="text-center">Dominant Hand</th>
                                    <th class="text-center">Status</th>
                                    <th class="text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for player in players %}
                                    <tr>
                                        <td style="color: black;">{{ player.id }}</td>
                                        <td style="color: black;">{{ player.name }}</td>
                                        <td style="color: black;">{{ player.mobile }}</td>
                                        <td style="color: black;">{{ player.age }}</td>
                                        <td style="color: black;">{{ player.sex }}</td>
                                        <td style="color: black;">{{ player.level }}</td>
                                        <td style="color: black;">{{ player.availability }}</td>
                                        <td style="color: black;">{{ player.preferred_position }}</td>
                                        <td style="color: black;">{{ player.dominant_hand }}</td>
                                        <td style="color: black;">{{ player.status }}</td>
                                        <td style="color: black;"><button type="button" class="btn btn-sm btn-light text-dark" data-toggle="modal" data-placement="top" data-target="#deletePlayer{{ player.id }}" title="Delete Row"><i class="fa-regular fa-trash-can"></i></button>
                                            <button type="button" class="btn btn-sm btn-light text-dark ml-2" data-toggle="modal" data-target="#editPlayer{{ player.id }}" title="Edit Row"><i class="fas fa-edit"></i></button>
                                            <!-- Modal for Delete Player -->
                                            <div class="modal fade" id="deletePlayer{{ player.id }}" tabindex="-1" role="dialog" aria-hidden="true">
                                                <div class="modal-dialog modal-sm">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Delete Player {{ player.name }}</h5>
                                                            <button type="button" class="close" data-dismiss="modal"><span>&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body text-dark p-3">
                                                            <h5 class="my-3">Are you sure want to delete the Player?</h5>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <div class="d-flex justify-content-center">
                                                                <form action="{{ url_for('delete_player') }}" method="post">
                                                                    <input type="text" name="player_id" value="{{ player.id }}" hidden>
                                                                    <div class="d-flex justify-content-center">
                                                                        <button type="submit" class="btn btn-square btn-danger">Delete</button>
                                                                    </div>
                                                                </form>
                                                            </div> 
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Modal for Editing Player row -->
                                            <div class="modal fade" id="editPlayer{{ player.id }}">
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Edit Employee {{ player.name }}</h5>
                                                            <button type="button" class="close" data-dismiss="modal"><span>&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="container-fluid">
                                                                <div class="card-body">
                                                                    <div class="basic-form">
                                                                        <form action="{{ url_for('edit_player') }}" method="post" id="new_player_form">
                                                                            <input type="text" name="player_id" value="{{ player.id }}" hidden>
                                                                            <div class="form-row">
                                                                                <div class="form-group col-md-6">
                                                                                    <label style="color: rgb(61, 56, 56);">Player Name</label>
                                                                                    <input type="text" name="new_name" id="p_name" value="{{ player.name }}" class="form-control" required>
                                                                                </div>
                                                                                <div class="form-group col-md-6">
                                                                                    <label style="color: rgb(61, 56, 56);">Phone/WhatsApp number</label>
                                                                                    <input type="text" name="new_mobile" id="p_mobile" value="{{ player.mobile }}" class="form-control" required>
                                                                                    <small class="text-dark">* Don't forget to add country code, Example: +88</small>
                                                                                </div>
                                                                                <div class="form-group col-md-6">
                                                                                    <label style="color: rgb(61, 56, 56);">Age</label>
                                                                                    <input type="text" name="new_age" value="{{ player.age }}" id="p_age" class="form-control" required>
                                                                                </div>
                                                                                <div class="form-group col-md-6">
                                                                                    <label style="color: rgb(61, 56, 56);">sex</label>
                                                                                    <select id="inputSex" name="new_sex" class="form-control">
                                                                                        <option value="Hombre" {% if player.sex == "Hombre" %} selected {% endif %}>Hombre</option>
                                                                                        <option value="Mujer" {% if player.sex == "Mujer" %} selected {% endif %}>Mujer</option>
                                                                                    </select>
                                                                                    <div class="small text-danger" id="sex_error">
                                            
                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group col-md-6">
                                                                                    <label style="color: rgb(61, 56, 56);">Player Level</label>
                                                                                    <select id="inputLevel" name="new_level" class="form-control">
                                                                                        <option value="segunda baja" {% if player.level == "segunda baja" %} selected {% endif %}>segunda baja</option>
                                                                                        <option value="tercera alta" {% if player.level == "tercera alta" %} selected {% endif %}>tercera alta</option>
                                                                                        <option value="Tercera medi" {% if player.level == "Tercera media" %} selected {% endif %}>Tercera media</option>
                                                                                        <option value="Segunda medi" {% if player.level == "Segunda medi" %} selected {% endif %}>Segunda medi</option>
                                                                                        <option value="cuarta baja" {% if player.level == "cuarta baja" %} selected {% endif %}>cuarta baja</option>
                                                                                        <option value="segunda alta" {% if player.level == "segunda alta" %} selected {% endif %}>segunda alta</option>
                                                                                        <option value="cuarta alta" {% if player.level == "cuarta alta" %} selected {% endif %}>cuarta alta</option>
                                                                                        <option value="usuario no respo" {% if player.level == "usuario no respo" %} selected {% endif %}>usuario no respo</option>
                                                                                        <option value="Cuarta media" {% if player.level == "Cuarta media" %} selected {% endif %}>Cuarta media</option>
                                                                                        <option value="tercera baja" {% if player.level == "tercera baja" %} selected {% endif %}>tercera baja</option>
                                                                                        <option value="No interesad" {% if player.level == "No interesado" %} selected {% endif %}>No interesado</option>
                                                                                        <option value="undefined" {% if player.level == "undefined" %} selected {% endif %}>undefined</option>
                                                                                        <option value="Extranjero" {% if player.level == "Extranjero" %} selected {% endif %}>Extranjero</option>
                                                                                        <option value="Quinta" {% if player.level == "Quinta" %} selected {% endif %}>Quinta</option>
                                                                                        <option value="primera" {% if player.level == "primera" %} selected {% endif %}>primera</option>
                                                                                        <option value="nuevo usuario" {% if player.level == "nuevo usuario" %} selected {% endif %}>nuevo usuario</option>
                                                                                    </select>
                                                                                    <div class="small text-danger" id="level_error">
                                            
                                                                                    </div>
                                                                                </div>
                                                                                <div class="form-group col-md-6">
                                                                                    <label style="color: rgb(61, 56, 56);">Status</label>
                                                                                    <select id="inputStatus" name="new_status" class="form-control">
                                                                                        <option value="Active" {% if player.status == "Active" %} selected {% endif %}>Active</option>
                                                                                        <option value="Stopped" {% if player.status == "Stopped" %} selected {% endif %}>Stopped</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-md-12">
                                                                                    <div class="d-flex justify-content-center">
                                                                                        <button type="submit" class="btn btn-primary">Save & Add</button>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                            </div>
                                                                            
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                            </div>

                                        </td>
                                        
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    
                </div>
            </div>
        </div>
        <!--**********************************
            Content body end
        ***********************************-->


        <!--**********************************
            Footer start
        ***********************************-->
        <!-- <div class="footer">
            <div class="copyright">
                <p>Copyright © Designed &amp; Developed by <a href="https://yatezzitos.com/" target="_blank">Yatezzitos</a></p>
            </div>
        </div> -->
        <!--**********************************
            Footer end
        ***********************************-->

        <!--**********************************
           Support ticket button start
        ***********************************-->

        <!--**********************************
           Support ticket button end
        ***********************************-->


    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function(){
            function filterTable() {
                var searchValue = $("#all_search").val().toLowerCase();
                var sexValue = $("#inputSex").val().toLowerCase();
                var levelValue = $("#inputLevel").val().toLowerCase();
                
                $("#customTable tbody tr").filter(function() {
                    var rowText = $(this).find('td:lt(3)').text().toLowerCase();
                    var sexText = $(this).find('td:eq(4)').text().toLowerCase();
                    var levelText = $(this).find('td:eq(5)').text().toLowerCase();
    
                    var matchSearch = rowText.indexOf(searchValue) > -1;
                    var matchSex = (sexValue === "choose...") || (sexText.indexOf(sexValue) > -1);
                    var matchLevel = (levelValue === "choose...") || (levelText.indexOf(levelValue) > -1);
    
                    $(this).toggle(matchSearch && matchSex && matchLevel);
                });
            }
    
            $("#all_search").on("keyup", filterTable);
            $("#inputSex").on("change", filterTable);
            $("#inputLevel").on("change", filterTable);
        });
    </script>
    <!-- Required vendors -->
    <script src="{{ url_for('static',filename = 'vendor/global/global.min.js') }}"></script>  
    <script src="{{ url_for('static',filename = 'js/quixnav-init.js') }}"></script> 
    <script src="{{ url_for('static',filename = 'js/custom.min.js') }}"></script> 

</body>

</html>